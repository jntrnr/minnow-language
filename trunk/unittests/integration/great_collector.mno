feature Pixel
  x : int
  y : int
  def Pixel(myX : int, myY : int)
    x = myX
    y = myY
  end
end

actor Collector
  m_pixels : Array[Pixel]
  total : int

  def Collector()
    m_pixels = new Array[Pixel]
    total = 0
  end

  def print(p : Pixel)
    print(p.x) 
    print(" ")
    print(p.y)
    print(" ")
    print("\n")
  end

  action receive(p : Pixel)
    m_pixels.push(p)
//m_pixels[m_pixels.size() - 1]
    print(m_pixels[m_pixels.size() - 1])
    total += 1
    print(total); print("\n")
    if (total == 5000)
      Sys.exit()
    end

  end
end

action main
  x : int = 0
  y : int = 0
  c : var = spawn Collector()

  while (x < 100)
    y = 0
    while (y < 50)
      c::receive(new Pixel(x, y))
      y += 1
    end
    x += 1
  end
end
